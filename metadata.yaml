# Copyright 2024 Canonical Ltd.
# See LICENSE file for licensing details.

name: spark-history-server-k8s
display-name: Spark History Server
summary: Kubernetes based charm for Spark History Server.
description: |
  "Apache Spark is a multi-language engine for executing data engineering, 
   data science, and machine learning on single-node machines or clusters.
   History Server is a Spark component that allows the users to view and 
   analyze their completed Spark application logs.
   
   This charm packages Apache Spark's History Server for Kubernetes environments."

containers:
  spark-history-server:
    resource: spark-history-server-image

resources:
  spark-history-server-image:
    type: oci-image
    description: OCI image for Spark History Server
    upstream-source: ghcr.io/welpaolo/charmed-spark@sha256:90c3b889a1af438661afa431993e262503ca4ed8f4993c35149248c8e3107af3

requires:
  s3-credentials:
    interface: s3
  azure-credentials:
    interface: azure
  ingress:
    interface: ingress
    limit: 1
  auth-proxy:
    interface: auth_proxy
    limit: 1
  logging:
    interface: loki_push_api
    description: |
      Receives Loki's push api endpoint address to push logs to, and forwards charm's built-in alert rules to Loki.

provides:
  metrics-endpoint:
    interface: prometheus_scrape
  grafana-dashboard:
    interface: grafana_dashboard
  